<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chat App</title>
<style>
    body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
    }
    .chat-container {
        width: 100%;
        max-width: 800px;
        margin: 0 auto;
        padding: 20px;
    }
    .message-container {
        display: flex;
        align-items: flex-start;
        margin-bottom: 10px;
    }
    .avatar {
        width: 50px;
        height: 50px;
        border-radius: 50%;
        margin-right: 10px;
    }
    .message-content {
        background-color: #f2f2f2;
        padding: 10px;
        border-radius: 10px;
    }
    .user-info {
        font-weight: bold;
        margin-bottom: 5px;
    }
    .message-actions {
        margin-top: 5px;
    }
    .comment {
        margin-bottom: 5px;
    }
</style>
</head>
<body>
<div class="chat-container">
    <div id="chatBox"></div>
    <div class="message-input">
        <input type="text" id="messageInput" placeholder="Type your message...">
        <input type="file" id="avatarInput" accept="image/*">
        <button onclick="sendMessage()">Send</button>
    </div>
</div>
<script>
    let currentUser = prompt("Please enter your nickname:");
    let currentUserId = Math.random().toString(36).substr(2, 9); // Generating random user id
    let chatBox = document.getElementById('chatBox');

    function sendMessage() {
        let messageInput = document.getElementById('messageInput');
        let messageText = messageInput.value.trim();
        let avatarInput = document.getElementById('avatarInput');
        let avatar = avatarInput.files[0];
        
        if (messageText !== '') {
            appendMessage(currentUserId, currentUser, messageText, avatar);
            messageInput.value = '';
            avatarInput.value = '';
        }
    }

    function appendMessage(userId, userName, message, avatar) {
        let messageContainer = document.createElement('div');
        messageContainer.classList.add('message-container');
        
        let avatarElement = document.createElement('img');
        avatarElement.classList.add('avatar');
        if (avatar) {
            avatarElement.src = URL.createObjectURL(avatar);
        } else {
            avatarElement.src = 'default_avatar.jpg'; // Default avatar image
        }
        avatarElement.alt = userName + "'s Avatar";
        
        let messageContent = document.createElement('div');
        messageContent.classList.add('message-content');
        
        let userInfo = document.createElement('div');
        userInfo.classList.add('user-info');
        userInfo.textContent = userName;
        
        let messageText = document.createElement('div');
        messageText.textContent = message;
        
        messageContent.appendChild(userInfo);
        messageContent.appendChild(messageText);
        
        messageContainer.appendChild(avatarElement);
        messageContainer.appendChild(messageContent);
        
        chatBox.appendChild(messageContainer);
        chatBox.scrollTop = chatBox.scrollHeight;
    }
</script>
</body>
</html>
